{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-115e133a6adaf1c7.js","src/index.js","src/js/createMainMarkup.js","node_modules/@parcel/runtime-js/lib/runtime-70c3aabb32a86823.js","node_modules/@parcel/runtime-js/lib/runtime-643dfc921be0cb37.js","src/js/pagination.js","src/js/preloader.js","src/js/inputCheck.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"5ZPII\\\":\\\"index.548a1075.js\\\",\\\"fKKvY\\\":\\\"filmWrap.dabdf2b2.jpg\\\",\\\"lp5u4\\\":\\\"sprite.46d65713.svg\\\",\\\"4627Z\\\":\\\"my-library.6df93fbd.js\\\"}\"));","import './js/btn-anchor';\nimport './js/createMainMarkup';\nimport './js/pagination';\nimport './js/preloader';\nimport './js/inputCheck';\nimport './js/localstorageApp';\nimport './js/modal-film-info';\nimport './js/changeTheme';\nimport './js/modal-team';\nimport './js/modal-authorization';\nimport './js/youTube';\n\nimport './js/auth-firebase';\n","import { searchGenresById } from './genresList';\nimport ApiFilmoteka from './filmotekaApi';\nimport { renderFoo } from './renderMarkup';\nimport img from '../images/filmWrap.jpg';\nimport youtube from '../images/sprite.svg';\nimport pagination from './pagination';\nconst api = new ApiFilmoteka();\nimport { cleanerMarkup } from './cleanerMarkup';\nimport { preloaderRefresh, preloaderRefreshOFF } from './preloader';\nimport { refs } from './refs';\nexport { api };\n\nrefs.paginationBox.addEventListener('click', handlerPagination);\n\nlet globalCurrentpage = 1;\n\n// функция создания списка фильмов\nexport async function createMainMarkup(fetchData) {\n  const results = await fetchData;\n  // console.log('results', results);\n  refs.fetchDataValue = results;\n  // получаем массив из елементов 'li' , переводим в строку с помощю join\n  const filmCards = results\n    .map(\n      ({\n        id,\n        poster_path,\n        title,\n        genre_ids,\n        release_date,\n      }) => `<li class=\"film__item\">\n        <a class=\"film__link\" id=\"${id}\">\n  <div class=\"film__wrap\">\n      <img src=${\n        poster_path ? `https://image.tmdb.org/t/p/w500${poster_path}` : img\n      } class=\"film-item__img\" alt=\"${title}\" width=\"300\">\n  </div>\n  <div class=\"wrap__film>\n  <div class=\"film__title-wrap\">\n  <h3 class=\"film__title\">${title}</h3>\n  </div>\n  <div class=\"film__genres-and-date\">\n  <p class=\"film__genres\">${\n    searchGenresById(genre_ids) ? searchGenresById(genre_ids) : 'Unknown genre'\n  }</p>\n  <p class=\"film__release-date\">${\n    //проверяем через тернарник\n    release_date ? new Date(release_date).getFullYear() : 'Nobody knows'\n  }</p>\n\n   </div>\n   </div>\n   </a>\n   <div class=\"wrap-youtube\">\n  <button type=\"button\" class=\"btn-youtube\" id=\"${id}\">\n    <svg class=\"svg-youtube\">\n      <use href=\"${youtube}#icon-youtube\"></use>\n    </svg>\n  </button>\n</div>\n   </li>`\n    )\n    .join('');\n\n  // возвращаем строку\n  renderFoo(filmCards, refs.cardListEl);\n\n  await pagination(api.pageNumber, api.totalPages);\n  return filmCards;\n}\n// вызываем функцию render\ncreateMainMarkup(api.fetchPopularsFilms());\n\nasync function handlerPagination(evt) {\n  if (api.filmName) {\n    // console.log('return');\n    return;\n  } else {\n    // console.log('asd');\n    if (evt.target.nodeName !== 'LI') {\n      return;\n    }\n\n    if (evt.target.textContent === '❮') {\n      api.setPageNumber((globalCurrentpage -= 1));\n\n      const filesFromBackend = await api.fetchPopularsFilms();\n\n      cleanerMarkup(refs.cardListEl);\n      createMainMarkup(filesFromBackend);\n\n      pagination(api.pageNumber, api.totalPages);\n      preloaderRefreshOFF();\n      return;\n    }\n\n    if (evt.target.textContent === '❯') {\n      api.setPageNumber((globalCurrentpage += 1));\n\n      const filesFromBackend = await api.fetchPopularsFilms();\n\n      cleanerMarkup(refs.cardListEl);\n      createMainMarkup(filesFromBackend);\n\n      pagination(api.pageNumber, api.totalPages);\n      preloaderRefreshOFF();\n      return;\n    }\n\n    if (evt.target.id === 'left-pagnDots') {\n      api.setPageNumber((globalCurrentpage -= 3));\n\n      const filesFromBackend = await api.fetchPopularsFilms();\n\n      cleanerMarkup(refs.cardListEl);\n      createMainMarkup(filesFromBackend);\n\n      pagination(api.pageNumber, api.totalPages);\n      preloaderRefreshOFF();\n      return;\n    }\n\n    if (evt.target.id === 'right-pagnDots') {\n      api.setPageNumber((globalCurrentpage += 3));\n      const filesFromBackend = await api.fetchPopularsFilms();\n\n      cleanerMarkup(refs.cardListEl);\n      createMainMarkup(filesFromBackend);\n\n      pagination(api.pageNumber, api.totalPages);\n      preloaderRefreshOFF();\n      return;\n    }\n\n    const page = evt.target.textContent;\n\n    api.setPageNumber(Number(page));\n    const filesFromBackend = await api.fetchPopularsFilms();\n\n    cleanerMarkup(refs.cardListEl);\n    createMainMarkup(filesFromBackend);\n\n    pagination(api.pageNumber, api.totalPages);\n    preloaderRefreshOFF();\n  }\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"fKKvY\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lp5u4\")).toString();","import { refs } from './refs';\nlet globalCurrentpage = 1;\n\nexport default function pagination(currentPage, allPages) {\n  globalCurrentpage = currentPage;\n  let markup = '';\n  let beforeTwoPage = currentPage - 2;\n  let beforePage = currentPage - 1;\n  let afterPage = currentPage + 1;\n  let afterTwoPage = currentPage + 2;\n  if (currentPage > 1) {\n    markup += `<li class=\"paginationRow\">&#10094;</li>`;\n  }\n  if (currentPage > 1) {\n    markup += `<li>1</li>`;\n  }\n\n  if (currentPage > 4) {\n    markup += `<li id=\"left-pagnDots\">...</li>`;\n  }\n  if (currentPage > 3) {\n    markup += `<li>${beforeTwoPage}</li>`;\n  }\n  if (currentPage > 2) {\n    markup += `<li>${beforePage}</li>`;\n  }\n  markup += `<li class=\"paginationPage--current\">${currentPage}</li>`;\n  if (allPages - 1 > currentPage) {\n    markup += `<li>${afterPage}</li>`;\n  }\n  if (allPages - 2 > currentPage) {\n    markup += `<li>${afterTwoPage}</li>`;\n  }\n  if (allPages - 3 > currentPage) {\n    markup += `<li id=\"right-pagnDots\">...</li>`;\n  }\n  if (allPages > currentPage) {\n    markup += `<li>${currentPage + 5}</li>`;\n    markup += `<li class=\"paginationRow\">&#10095;</li>`;\n  }\n\n  refs.paginationBox.innerHTML = markup;\n}\n","import { refs } from './refs';\n\nexport function preloaderRefresh() {\n  refs.bodyEl.classList.add('no-scroll');\n  refs.preloaderEl.classList.remove('preloader--hide');\n  setTimeout(() => {\n    refs.bodyEl.scrollIntoView({ top: 0, behavior: 'smooth' });\n  }, 100);\n  // console.log('ЗАПУСК ПРЕЛОУДЕРА');\n}\n\nexport function preloaderRefreshOFF() {\n  \n  const arrElements = Array.from(refs.imgElArr);\n  // console.log(arrElements);\n\n  if (arrElements.length === 0) {\n    refs.preloaderEl.classList.add('preloader--hide');\n    refs.bodyEl.classList.remove('no-scroll');\n  }\n\n  arrElements.forEach((el, index) => {\n    el.onload = () => {\n      if (index === arrElements.length - 1) {\n        refs.preloaderEl.classList.add('preloader--hide');\n        refs.bodyEl.classList.remove('no-scroll');\n        // console.log('ВЫКЛ ПРЕЛОУДЕРА');\n      }\n      // console.log(\"мы молодцы\")\n    };\n  });\n}\n\nfunction preloaderOn() {\n  refs.bodyEl.classList.add('no-scroll');\n  refs.preloaderEl.classList.remove('preloader--hide');\n  window.addEventListener('load', onLoad);\n}\n\nfunction onLoad(e) {\n  refs.preloaderEl.classList.add('preloader--hide');\n  refs.bodyEl.classList.remove('no-scroll');\n  window.removeEventListener('load', onLoad);\n  // console.log('C window слушатель успешно снят');\n}\n\npreloaderOn();\n\n// export class Preloader {\n\n//   constructor() {\n//     this.preloaderEl = document.querySelector('.preloader');\n\n//   }\n\n//   preloaderOn() {\n//    window.addEventListener('load', this.onLoad);\n//   }\n\n//   onLoad(e) {\n//     console.log(this.preloaderEl.classList);\n//     this.preloaderEl.classList.add('preloader--hide');\n//     // window.removeEventListener('load', onLoad);\n//     // console.log('C window слушатель успешно снят');\n//   }\n\n// }\n\n// const preloaderApp = new Preloader();\n// console.log(preloaderApp);\n// preloaderApp.preloaderOn()\n\n//  class Preloader {\n\n//   constructor() {\n//     this.preloderEl = document.querySelector('#preloader');\n//     this.precentsEl = document.querySelector('#precents');\n//     this.dataLength = 20;\n//     this.counter = 0;\n// }\n\n//   showPreloader() {\n//     this.preloderEl.classList.remove('preloader--hide')\n//   }\n//   hidePreloader() {\n//     this.preloderEl.classList.add('preloader--hide')\n//   }\n//   setCounter(dataLength) {\n//     this.dataLength = dataLength;\n//     console.log(dataLength)\n//   }\n//    precentsLoader() {\n//      let inc = 100 / this.dataLength;\n\n//      let timerId = setInterval(() => {\n//        this.counter++\n//        this.precentsEl.innerHTML = ((this.counter * 100) / this.dataLength).toFixed();\n\n//        if (this.counter === this.dataLength) {\n//          clearInterval(timerId);\n//          this.hidePreloader();\n//        }\n//      }, 100)\n\n//   }\n\n// }\n\n// window.addEventListener('load', (e) => {\n//   // console.log(\"страничка загрузилась\");\n//   // const mediaFiles = document.querySelectorAll('img');\n//   // console.log(mediaFiles.length);\n//   // preloader.dataLength = mediaFiles.length;\n//   preloader.precentsLoader()\n\n// })\n\n// export function prelouderOn() {\n//   window.addEventListener('DOMContentLoaded', loader);\n// }\n\n// function loader(e) {\n\n//   setTimeout(() => {\n//     const preloaderRef = document.querySelector('.preloader');\n//     const precentsRef = document.querySelector('#precents');\n\n//     console.log(precentsRef);\n//     const mediaFiles = document.querySelectorAll('film-item__img');\n//     let i = 0;\n//     // console.log(e)\n//     console.log(mediaFiles);\n\n//     Array.from(mediaFiles).forEach((el, index) => {\n//       el.onload = () => {\n//         i++\n\n//         precentsRef.innerHTML = ((i * 100) / mediaFiles.length).toFixed();\n\n//         if (i === mediaFiles.length) {\n//           precentsRef.innerHTML = 100;\n//           preloaderRef.classList.add('preloader--hide');\n\n//           window.removeEventListener('DOMContentLoaded', loader);\n//           // console.log(\"Cлушатель DOMContentLoaded c window снят!\");\n//         }\n//       }\n\n//     })\n//   },200)\n\n// }\n\n// prelouderOn()\n","// Import\n// import ApiFilmoteka from './filmotekaApi';\nimport img from '../images/filmWrap.jpg';\nimport youtube from '../images/sprite.svg';\nimport { cleanerMarkup } from './cleanerMarkup';\nimport { searchGenresById } from './genresList';\nimport { renderFoo } from './renderMarkup';\nimport { refs } from './refs';\nimport { preloaderRefresh, preloaderRefreshOFF } from './preloader';\nimport { api } from './createMainMarkup';\nimport pagination from './pagination';\n\nlet globalCurrentpage = 1;\n\n// const api = new ApiFilmoteka();\n\nrefs.headerFormEl.addEventListener('submit', onFormSubmit);\nrefs.paginationBox.addEventListener('click', handlerPaginationInput);\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  api.setPageNumber(1);\n  let query = event.target.elements[0].value.trim();\n  refs.expFilmName = query;\n\n  //Checking for query existance\n  if (query) {\n    preloaderRefresh();\n\n    //Cleaning markup\n    cleanerMarkup(refs.cardListEl);\n    //Setting querry to api of ApiFilmoteka\n    api.setFilmName(query);\n    createMainMarkup(api.fetchFilmsByName());\n    refs.headerFormEl.reset();\n  } else {\n    //Running error message function\n    errorMessage();\n    return;\n  }\n}\n\nasync function createMainMarkup(fetchedData) {\n  //Getting results from API\n  const results = await fetchedData;\n  refs.fetchDataValue = results;\n  //Chegking response from API\n  if (!results.length) {\n    await errorMessage();\n  } else {\n    refs.headerErrorEl.classList.add('visually-hidden');\n    // получаем массив из елементов 'li' , переводим в строку с помощю join\n    const filmCards = results\n      .map(\n        ({\n          id,\n          poster_path,\n          title,\n          genre_ids,\n          release_date,\n        }) => `<li class=\"film__item\"><div class=\"test\">\n        <a class=\"film__link\" id=\"${id}\">\n  <div class=\"film__wrap\">\n  <img src=${\n    poster_path ? `https://image.tmdb.org/t/p/original${poster_path}` : img\n  } class=\"film-item__img\" alt=\"${title}\" width=\"300\">\n  </div>\n  <div class= \"film__info\">\n  <div class=\"film__title-wrap\">\n  <h3 class=\"film__title\">${title}</h3>\n  </div>\n  <div class=\"film__genres-and-date\">\n  <p class=\"film__genres\">${\n    searchGenresById(genre_ids) ? searchGenresById(genre_ids) : 'Unknown genre'\n  }</p>\n  <p class=\"film__release-date\">${\n    release_date ? new Date(release_date).getFullYear() : 'Nobody knows'\n  }</p>\n  </div>\n  \n   </div>\n   </div>\n   </a>\n   <div class=\"wrap-youtube\">\n  <button type=\"button\" class=\"btn-youtube\" id=\"${id}\">\n    <svg class=\"svg-youtube\">\n      <use href=\"${youtube}#icon-youtube\"></use>\n    </svg>\n  </button>\n</div>\n   </li>`\n      )\n      .join('');\n    // Running render function\n    renderFoo(filmCards, refs.cardListEl);\n    preloaderRefreshOFF();\n    pagination(api.pageNumber, api.totalPages);\n    return filmCards;\n  }\n}\n\nfunction errorMessage() {\n  preloaderRefreshOFF();\n  //Making message visible\n  refs.headerErrorEl.classList.remove('visually-hidden');\n  //Form element cleaning\n  refs.headerFormEl.reset();\n  cleanerMarkup(refs.paginationBox);\n}\n\nasync function handlerPaginationInput(evt) {\n  if (!api.getFilmName()) {\n    return;\n  } else {\n    if (evt.target.nodeName !== 'LI') {\n      return;\n    }\n    if (evt.target.textContent === '❮') {\n      api.setPageNumber((globalCurrentpage -= 1));\n      api.getFilmName();\n\n      const filesFromBackend = await api.fetchFilmsByName();\n\n      cleanerMarkup(refs.cardListEl);\n      createMainMarkup(filesFromBackend);\n\n      pagination(api.pageNumber, api.totalPages);\n      preloaderRefreshOFF();\n      return;\n    }\n    if (evt.target.textContent === '❯') {\n      api.setPageNumber((globalCurrentpage += 1));\n      api.getFilmName();\n      const filesFromBackend = await api.fetchFilmsByName();\n\n      cleanerMarkup(refs.cardListEl);\n      createMainMarkup(filesFromBackend);\n\n      pagination(api.pageNumber, api.totalPages);\n      preloaderRefreshOFF();\n      return;\n    }\n    if (evt.target.id === 'left-pagnDots') {\n      api.setPageNumber((globalCurrentpage -= 3));\n\n      api.getFilmName();\n      const filesFromBackend = await api.fetchFilmsByName();\n\n      cleanerMarkup(refs.cardListEl);\n      createMainMarkup(filesFromBackend);\n      preloaderRefreshOFF();\n      pagination(api.pageNumber, api.totalPages);\n\n      return;\n    }\n\n    if (evt.target.id === 'right-pagnDots') {\n      api.setPageNumber((globalCurrentpage += 3));\n      api.getFilmName();\n      const filesFromBackend = await api.fetchFilmsByName();\n\n      cleanerMarkup(refs.cardListEl);\n      createMainMarkup(filesFromBackend);\n      preloaderRefreshOFF();\n      pagination(api.pageNumber, api.totalPages);\n\n      return;\n    }\n    const page = evt.target.textContent;\n\n    api.setPageNumber(Number(page));\n    const filesFromBackend = await api.fetchFilmsByName();\n\n    cleanerMarkup(refs.cardListEl);\n    createMainMarkup(filesFromBackend);\n\n    pagination(api.pageNumber, api.totalPages);\n    preloaderRefreshOFF();\n  }\n}\n"],"names":["parcelRequire","register","JSON","parse","$2vqxs","$fad49ad56638fa2d$exports","URL","resolve","import","meta","url","toString","$a4212a039eccdb43$exports","$krGWQ","$1bab9c519cfa82bc$var$globalCurrentpage","$1bab9c519cfa82bc$export$2e2bcd8739ae039","currentPage","allPages","markup","refs","paginationBox","innerHTML","$d647d88d10b4b0f7$export$f738f829ee269bf","arrElements","Array","from","imgElArr","length","preloaderEl","classList","add","bodyEl","remove","forEach","el","index","onload","$d647d88d10b4b0f7$var$onLoad","e","window","removeEventListener","addEventListener","$deaf12725bb60d2e$export$644d8ea042df96a6","$lUsL3","default","async","evt","filmName","target","nodeName","textContent","setPageNumber","$deaf12725bb60d2e$var$globalCurrentpage","filesFromBackend","fetchPopularsFilms","$anlFm","cleanerMarkup","cardListEl","$deaf12725bb60d2e$export$dda24948a95963","pageNumber","totalPages","id","page","Number","fetchData","results","fetchDataValue","filmCards","map","poster_path","title","genre_ids","release_date","$parcel$interopDefault","searchGenresById","Date","getFullYear","join","$cky31","renderFoo","$891ef91b81746a65$var$globalCurrentpage","$891ef91b81746a65$var$createMainMarkup","fetchedData","headerErrorEl","$891ef91b81746a65$var$errorMessage","headerFormEl","reset","event","preventDefault","query","elements","value","trim","expFilmName","setTimeout","scrollIntoView","top","behavior","setFilmName","fetchFilmsByName","getFilmName"],"version":3,"file":"index.548a1075.js.map"}